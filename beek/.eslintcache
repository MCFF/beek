[{"/Users/pacoescobar/Documents/react/beek/beek/src/index.js":"1","/Users/pacoescobar/Documents/react/beek/beek/src/reportWebVitals.js":"2","/Users/pacoescobar/Documents/react/beek/beek/src/App.js":"3","/Users/pacoescobar/Documents/react/beek/beek/src/pages/list/List.js":"4","/Users/pacoescobar/Documents/react/beek/beek/src/components/Layout.js":"5","/Users/pacoescobar/Documents/react/beek/beek/src/pages/new/New.js":"6","/Users/pacoescobar/Documents/react/beek/beek/src/components/Loader.js":"7","/Users/pacoescobar/Documents/react/beek/beek/src/pages/details/Details.js":"8","/Users/pacoescobar/Documents/react/beek/beek/src/pages/404/Error404.js":"9","/Users/pacoescobar/Documents/react/beek/beek/src/components/AddNote.js":"10","/Users/pacoescobar/Documents/react/beek/beek/src/components/Options.js":"11","/Users/pacoescobar/Documents/react/beek/beek/src/components/DeleteAudiobook.js":"12","/Users/pacoescobar/Documents/react/beek/beek/src/pages/edit/Edit.js":"13","/Users/pacoescobar/Documents/react/beek/beek/src/components/AudioBooksList.js":"14","/Users/pacoescobar/Documents/react/beek/beek/src/components/Form.js":"15","/Users/pacoescobar/Documents/react/beek/beek/src/customHooks/useElapsedTime.js":"16","/Users/pacoescobar/Documents/react/beek/beek/src/components/Note.js":"17","/Users/pacoescobar/Documents/react/beek/beek/src/components/Playback.js":"18","/Users/pacoescobar/Documents/react/beek/beek/src/components/Notes.js":"19"},{"size":500,"mtime":1609193090729,"results":"20","hashOfConfig":"21"},{"size":362,"mtime":1609193090730,"results":"22","hashOfConfig":"21"},{"size":706,"mtime":1609794414925,"results":"23","hashOfConfig":"21"},{"size":2084,"mtime":1609886088360,"results":"24","hashOfConfig":"21"},{"size":1391,"mtime":1609885921419,"results":"25","hashOfConfig":"21"},{"size":3638,"mtime":1609886148372,"results":"26","hashOfConfig":"21"},{"size":752,"mtime":1609459053402,"results":"27","hashOfConfig":"21"},{"size":6328,"mtime":1609955380673,"results":"28","hashOfConfig":"21"},{"size":305,"mtime":1609970957775,"results":"29","hashOfConfig":"21"},{"size":1026,"mtime":1609787193949,"results":"30","hashOfConfig":"21"},{"size":654,"mtime":1609794806497,"results":"31","hashOfConfig":"21"},{"size":785,"mtime":1609791998932,"results":"32","hashOfConfig":"21"},{"size":4931,"mtime":1609886186966,"results":"33","hashOfConfig":"21"},{"size":1544,"mtime":1609888017300,"results":"34","hashOfConfig":"21"},{"size":1186,"mtime":1609884898898,"results":"35","hashOfConfig":"21"},{"size":281,"mtime":1609953485341,"results":"36","hashOfConfig":"21"},{"size":389,"mtime":1609952806301,"results":"37","hashOfConfig":"21"},{"size":492,"mtime":1609955010080,"results":"38","hashOfConfig":"21"},{"size":569,"mtime":1609955394649,"results":"39","hashOfConfig":"21"},{"filePath":"40","messages":"41","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},"1wvb6nj",{"filePath":"43","messages":"44","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"47","messages":"48","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"49","usedDeprecatedRules":"42"},{"filePath":"50","messages":"51","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"52","messages":"53","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"54","messages":"55","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"56","messages":"57","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"58","messages":"59","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"62","messages":"63","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"64","messages":"65","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"66","messages":"67","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"68","usedDeprecatedRules":"42"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"42"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"77","messages":"78","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"79","messages":"80","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/pacoescobar/Documents/react/beek/beek/src/index.js",[],["81","82"],"/Users/pacoescobar/Documents/react/beek/beek/src/reportWebVitals.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/App.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/pages/list/List.js",["83"],"import React, { useState, useEffect } from \"react\";\nimport { Link } from \"react-router-dom\";\nimport AudioBooksList from \"../../components/AudioBooksList\";\nimport Layout from \"../../components/Layout\";\nimport Loader from \"../../components/Loader\";\n\nimport \"./styles/list.css\";\n\nexport default function List(props) {\n  let books = [];\n  const [query, setQuery] = useState(\"\");\n  const [showingBooks, setShowingbooks] = useState(books);\n  const [isLoading, setIsLoading] = useState(true);\n\n  const handleSearch = (e) => {\n    setQuery(e.target.value);\n  };\n\n  useEffect(() => {\n    fetchBooks();\n  }, []);\n\n  useEffect(() => {\n    searchBooks();\n  }, [query]);\n\n  const fetchBooks = async () => {\n    const response = await fetch(\n      \"https://api.contentful.com/spaces/1t4hjzo7y0kb/environments/master/entries?select=fields,sys.id,sys.version&locale=es-MX&content_type=audiocontent-v11\",\n      {\n        method: \"GET\",\n        headers: {\n          Authorization:\n            \"Bearer CFPAT-LBtveUvtDi7YjAhsyNzZURthngcrVnIr53eOZjYnxuc\",\n        },\n      }\n    );\n    const data = await response.json();\n    setShowingbooks(data.items);\n    setIsLoading(false);\n  };\n\n  const searchBooks = async () => {\n    const response = await fetch(\n      `https://api.contentful.com/spaces/1t4hjzo7y0kb/environments/master/entries?query=${query}&select=fields,sys.id&locale=es-MX&content_type=audiocontent-v11`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization:\n            \"Bearer CFPAT-LBtveUvtDi7YjAhsyNzZURthngcrVnIr53eOZjYnxuc\",\n        },\n      }\n    );\n    const data = await response.json();\n    setShowingbooks(data.items);\n  };\n\n  return (\n    <Layout onChange={handleSearch} queryValue={query} search={true}>\n      <nav className=\"list--nav\">\n        <Link to=\"/new\" className=\"list--link__green\">\n          New audiobook\n        </Link>\n      </nav>\n      <section className=\"list\">\n        <ul>\n          <AudioBooksList showingBooks={showingBooks} />\n        </ul>\n      </section>\n      <Loader isLoading={isLoading}>Loading...</Loader>\n    </Layout>\n  );\n}\n","/Users/pacoescobar/Documents/react/beek/beek/src/components/Layout.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/pages/new/New.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/components/Loader.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/pages/details/Details.js",["84","85"],"/Users/pacoescobar/Documents/react/beek/beek/src/pages/404/Error404.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/components/AddNote.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/components/Options.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/components/DeleteAudiobook.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/pages/edit/Edit.js",["86"],"import React, { useState, useEffect } from \"react\";\nimport Form from \"../../components/Form\";\nimport Layout from \"../../components/Layout\";\nimport Loader from \"../../components/Loader\";\n\nimport \"./styles/edit.css\";\n\nexport default function Edit(props) {\n  let CLOUDINARY_URL = \"https://api.cloudinary.com/v1_1/pacoe/image/upload\";\n  let CLOUDINARY_PRESET = \"zcoelvxn\";\n  let coverFile = null;\n\n  const [form, setForm] = useState({\n    form: {\n      name: \"\",\n      authors: \"\",\n      narrators: \"\",\n      duration: \"\",\n      cover: \"\",\n    },\n  });\n\n  const [cover, setCover] = useState(\"\");\n  const [coverReady, setCoverReady] = useState(true);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isLoadingImage, setIsLoadingImage] = useState(false);\n  const [isLoadingAudioBook, setIsLoadingAudioBook] = useState(false);\n  const [audioBookVersion, setAudioBookVersion] = useState(0);\n\n  /**************\n   * Handlers methods\n   ***************/\n\n  let handleSubmit = (e) => {\n    e.preventDefault();\n    uploadAudiobook();\n  };\n\n  let handleChange = (e) => {\n    setForm({\n      form: {\n        ...form.form,\n        [e.target.name]: e.target.value,\n      },\n    });\n  };\n\n  let handleFileChange = (e) => {\n    setCoverReady(false);\n    coverFile = e.target.files[0];\n    uploadImage();\n  };\n\n  /**********\n   * Upload's methods\n   ***********/\n\n  const uploadImage = async () => {\n    setIsLoadingImage(true);\n\n    let formData = new FormData();\n\n    formData.append(\"file\", coverFile);\n    formData.append(\"upload_preset\", CLOUDINARY_PRESET);\n\n    const response = await fetch(CLOUDINARY_URL, {\n      method: \"POST\",\n      body: formData,\n    });\n\n    const data = await response.json();\n\n    setCover(data.url);\n    setCoverReady(true);\n    setIsLoadingImage(false);\n  };\n\n  const uploadAudiobook = () => {\n    setIsLoadingAudioBook(true);\n\n    let newAudiobook = {\n      fields: {\n        title: {\n          \"es-MX\": form.form.name,\n        },\n        is_original: {\n          \"es-MX\": false,\n        },\n        street_date: {\n          \"es-MX\": new Date().toISOString(),\n        },\n        cost_per_play: {\n          \"es-MX\": 90,\n        },\n        authors: {\n          \"es-MX\": form.form.authors.split(\",\").map((a) => a.trim()),\n        },\n        narrators: {\n          \"es-MX\": form.form.narrators.split(\",\").map((a) => a.trim()),\n        },\n        duration: {\n          \"es-MX\": parseInt(form.form.duration, 10),\n        },\n        cover: {\n          \"es-MX\": cover,\n        },\n      },\n    };\n\n    if (coverReady) {\n      fetchNewAudioBook(newAudiobook);\n    }\n  };\n\n  /***********\n   * Fetch's methods\n   ***********/\n\n  const fetchNewAudioBook = async (audioBook) => {\n    console.log(audioBook);\n    await fetch(\n      `https://api.contentful.com/spaces/1t4hjzo7y0kb/environments/master/entries/${props.match.params.idAudioBook}`,\n      {\n        method: \"PUT\",\n        body: JSON.stringify(audioBook),\n        headers: {\n          Authorization:\n            \"Bearer CFPAT-LBtveUvtDi7YjAhsyNzZURthngcrVnIr53eOZjYnxuc\",\n          \"Content-Type\": \"application/json\",\n          \"X-Contentful-Content-Type\": \"audiocontent-v11\",\n          \"X-Contentful-Version\": audioBookVersion,\n        },\n      }\n    );\n\n    setIsLoadingAudioBook(false);\n    props.history.goBack();\n  };\n\n  const fetchAudioBook = async () => {\n    const response = await fetch(\n      `https://api.contentful.com/spaces/1t4hjzo7y0kb/environments/master/entries?&sys.id=${props.match.params.idAudioBook}&select=fields,sys.id,sys.version&locale=es-MX`,\n      {\n        method: \"GET\",\n        headers: {\n          Authorization:\n            \"Bearer CFPAT-LBtveUvtDi7YjAhsyNzZURthngcrVnIr53eOZjYnxuc\",\n        },\n      }\n    );\n    const data = await response.json();\n    setAudioBookVersion(data.items[0].sys.version);\n\n    setForm({\n      form: {\n        name: data.items[0].fields.title[\"es-MX\"],\n        authors: data.items[0].fields.authors[\"es-MX\"].join(),\n        narrators: data.items[0].fields.narrators[\"es-MX\"].join(),\n        duration: data.items[0].fields.duration[\"es-MX\"],\n        cover: data.items[0].fields.cover[\"es-MX\"],\n      },\n    });\n    setCover(data.items[0].fields.cover[\"es-MX\"]);\n    setIsLoading(false);\n  };\n\n  useEffect(() => {\n    fetchAudioBook();\n  }, []);\n\n  return (\n    <Layout history={props.history} title=\"Edit Audiobook\">\n      <section className=\"new--form\">\n        <Form\n          name={form.form.name}\n          authors={form.form.authors}\n          narrators={form.form.narrators}\n          duration={form.form.duration}\n          onHandleChange={handleChange}\n          onFileChange={handleFileChange}\n          onHandleSubmit={handleSubmit}\n        />\n      </section>\n      {<Loader isLoading={isLoading}>Loading...</Loader>}\n      {<Loader isLoading={isLoadingImage}>Uploading image...</Loader>}\n      {<Loader isLoading={isLoadingAudioBook}>Updating audiobook...</Loader>}\n    </Layout>\n  );\n}\n","/Users/pacoescobar/Documents/react/beek/beek/src/components/AudioBooksList.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/components/Form.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/customHooks/useElapsedTime.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/components/Note.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/components/Playback.js",[],"/Users/pacoescobar/Documents/react/beek/beek/src/components/Notes.js",[],{"ruleId":"87","replacedBy":"88"},{"ruleId":"89","replacedBy":"90"},{"ruleId":"91","severity":1,"message":"92","line":25,"column":6,"nodeType":"93","endLine":25,"endColumn":13,"suggestions":"94"},{"ruleId":"91","severity":1,"message":"95","line":67,"column":6,"nodeType":"93","endLine":67,"endColumn":8,"suggestions":"96"},{"ruleId":"91","severity":1,"message":"97","line":73,"column":6,"nodeType":"93","endLine":73,"endColumn":17,"suggestions":"98"},{"ruleId":"91","severity":1,"message":"95","line":169,"column":6,"nodeType":"93","endLine":169,"endColumn":8,"suggestions":"99"},"no-native-reassign",["100"],"no-negated-in-lhs",["101"],"react-hooks/exhaustive-deps","React Hook useEffect has a missing dependency: 'searchBooks'. Either include it or remove the dependency array.","ArrayExpression",["102"],"React Hook useEffect has a missing dependency: 'fetchAudioBook'. Either include it or remove the dependency array.",["103"],"React Hook useEffect has a missing dependency: 'audio.duration'. Either include it or remove the dependency array.",["104"],["105"],"no-global-assign","no-unsafe-negation",{"desc":"106","fix":"107"},{"desc":"108","fix":"109"},{"desc":"110","fix":"111"},{"desc":"108","fix":"112"},"Update the dependencies array to be: [query, searchBooks]",{"range":"113","text":"114"},"Update the dependencies array to be: [fetchAudioBook]",{"range":"115","text":"116"},"Update the dependencies array to be: [audio.duration, isLoading]",{"range":"117","text":"118"},{"range":"119","text":"116"},[648,655],"[query, searchBooks]",[2150,2152],"[fetchAudioBook]",[2244,2255],"[audio.duration, isLoading]",[4272,4274]]